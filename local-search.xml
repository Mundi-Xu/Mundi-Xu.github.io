<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>stl-list实现分析</title>
    <link href="/2019/11/01/stl-list%E5%AE%9E%E7%8E%B0/"/>
    <url>/2019/11/01/stl-list%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="stl-list-介绍"><a href="#stl-list-介绍" class="headerlink" title="stl_list 介绍"></a>stl_list 介绍</h1><p>今天我们来总结一下stl_List, 与单链表比较而言，stl_list无非就是链表结构不一样，至于其中的增删改查的细节实现本质是一样的，都是处理指针偏移。<strong>相比于vector，stl_List在插入和删除的时候可以达到O(1)的时间复杂度</strong>。</p><p>stl_list是一个<strong>双向循环链表</strong>，相对单链表来说查找效率高，无论是插入时的前插和后插，还是从后往前查找某个元素等。既然查找效率高了，自然添加，删除和修改元素时效率也就更高。唯一一个可以称为不足的就是每个节点需要耗费4字节指针来保存前一个节点的地址，因此如果遇到对内存要求比较苛刻的场景，而且一些操作单链表即可满足，那么可以考虑使用标准库中的<strong>forward_list</strong>（单链表）。</p><h1 id="stl-list-源码分析"><a href="#stl-list-源码分析" class="headerlink" title="stl_list 源码分析"></a>stl_list 源码分析</h1><p>分析gnu c++标准库中的stl_list，我们只需把握住整体结构即可，实现总共由三部分组成，<strong>链表节点</strong>(struct _List_node : public __detail::_List_node_base) ，<strong>迭代器</strong>（struct _List_iterator），<strong>链表数据结构</strong>（class list : protected _List_base&lt;_Tp, _Alloc&gt;）。</p><p>gnu下最新版本的stl_list实现加了一些额外的继承关系，_list_base中保存了一个_List_impl _M_impl中间变量，由该类_M_impl来保存节点，并对节点做基本处理。</p><h2 id="链表节点"><a href="#链表节点" class="headerlink" title="链表节点"></a>链表节点</h2><p>父类维护两个指针，子类才加入具体的value。</p><figure class="highlight cpp"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">struct</span> _<span class="hljs-title">List_node_base</span></span><br><span class="hljs-class">&#123;</span><br>    _List_node_base* _M_next;<br>    _List_node_base* _M_prev;<br><br>&#125;;<br><br>    <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> _Tp&gt;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> _<span class="hljs-title">List_node</span> :</span> <span class="hljs-keyword">public</span> __detail::_List_node_base<br>&#123;<br>    <span class="hljs-comment">///&lt; User&#x27;s data.</span><br>    _Tp _M_data;<br><br>&#125;;<br></code></pre></div></td></tr></table></figure><h2 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h2><p>主要是实现++和–等操作符重载，实现链表节点的前后移动。</p><figure class="highlight cpp"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> _Tp&gt;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> _<span class="hljs-title">List_iterator</span></span><br><span class="hljs-class">    &#123;</span><br>        <span class="hljs-keyword">typedef</span> _List_iterator&lt;_Tp&gt;                _Self;<br>        <span class="hljs-keyword">typedef</span> _List_node&lt;_Tp&gt;                    _Node;<br><br>        <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">ptrdiff_t</span>                          difference_type;<br>        <span class="hljs-keyword">typedef</span> <span class="hljs-built_in">std</span>::bidirectional_iterator_tag    iterator_category;<br>        <span class="hljs-keyword">typedef</span> _Tp                                value_type;<br>        <span class="hljs-keyword">typedef</span> _Tp*                               pointer;<br>        <span class="hljs-keyword">typedef</span> _Tp&amp;                               reference;<br><br>        _List_iterator() _GLIBCXX_NOEXCEPT<br>        : _M_node() &#123; &#125;<br><br>        <span class="hljs-keyword">explicit</span><br>        _List_iterator(__detail::_List_node_base* __x) _GLIBCXX_NOEXCEPT<br>        : _M_node(__x) &#123; &#125;<br><br>        _Self<br>        _M_const_cast() <span class="hljs-keyword">const</span> _GLIBCXX_NOEXCEPT<br>        &#123; <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>; &#125;<br><br>        <span class="hljs-comment">// Must downcast from _List_node_base to _List_node to get to _M_data.</span><br>        reference<br>        <span class="hljs-keyword">operator</span>*() <span class="hljs-keyword">const</span> _GLIBCXX_NOEXCEPT<br>        &#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">static_cast</span>&lt;_Node*&gt;(_M_node)-&gt;_M_data; &#125;<br><br>        pointer<br>        <span class="hljs-keyword">operator</span>-&gt;() <span class="hljs-keyword">const</span> _GLIBCXX_NOEXCEPT<br>        &#123; <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::__addressof(<span class="hljs-keyword">static_cast</span>&lt;_Node*&gt;(_M_node)-&gt;_M_data); &#125;<br><br>        _Self&amp;<br>        <span class="hljs-keyword">operator</span>++() _GLIBCXX_NOEXCEPT<br>        &#123;<br>            _M_node = _M_node-&gt;_M_next;    <span class="hljs-comment">//本质是链表节点的next指针操作</span><br>            <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>        &#125;<br><br>        _Self<br>        <span class="hljs-keyword">operator</span>++(<span class="hljs-keyword">int</span>) _GLIBCXX_NOEXCEPT<br>        &#123;<br>            _Self __tmp = *<span class="hljs-keyword">this</span>;<br>            _M_node = _M_node-&gt;_M_next;<br>            <span class="hljs-keyword">return</span> __tmp;<br>        &#125;<br><br>        _Self&amp;<br>        <span class="hljs-keyword">operator</span>--() _GLIBCXX_NOEXCEPT<br>        &#123;<br>            _M_node = _M_node-&gt;_M_prev;  <span class="hljs-comment">//本质是链表节点的prev指针操作</span><br>            <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>        &#125;<br><br>        _Self<br>        <span class="hljs-keyword">operator</span>--(<span class="hljs-keyword">int</span>) _GLIBCXX_NOEXCEPT<br>        &#123;<br>            _Self __tmp = *<span class="hljs-keyword">this</span>;<br>            _M_node = _M_node-&gt;_M_prev;<br>            <span class="hljs-keyword">return</span> __tmp;<br>        &#125;<br><br>        <span class="hljs-keyword">bool</span><br>        <span class="hljs-keyword">operator</span>==(<span class="hljs-keyword">const</span> _Self&amp; __x) <span class="hljs-keyword">const</span> _GLIBCXX_NOEXCEPT<br>        &#123; <span class="hljs-keyword">return</span> _M_node == __x._M_node; &#125;<br><br>        <span class="hljs-keyword">bool</span><br>        <span class="hljs-keyword">operator</span>!=(<span class="hljs-keyword">const</span> _Self&amp; __x) <span class="hljs-keyword">const</span> _GLIBCXX_NOEXCEPT<br>        &#123; <span class="hljs-keyword">return</span> _M_node != __x._M_node; &#125;<br><br>        <span class="hljs-comment">// The only member points to the %list element.</span><br>        __detail::_List_node_base* _M_node; <span class="hljs-comment">//维护一个链表节点</span><br>    &#125;;<br></code></pre></div></td></tr></table></figure><h2 id="链表数据结构"><a href="#链表数据结构" class="headerlink" title="链表数据结构"></a>链表数据结构</h2><p>实现类 _List_impl，主要用来维护链表节点，然后list类包含该类。</p><figure class="highlight cpp"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">struct</span> _<span class="hljs-title">List_impl</span></span><br><span class="hljs-class">      :</span> <span class="hljs-keyword">public</span> _Node_alloc_type<br>      &#123;<br><br>    __detail::_List_node_base _M_node;  <span class="hljs-comment">//其实就是维护节点，标准库中用了一个中间层来处理</span><br><br>    _List_impl()<br>    : _Node_alloc_type(), _M_node()<br>    &#123; &#125;<br><br>    _List_impl(<span class="hljs-keyword">const</span> _Node_alloc_type&amp; __a) _GLIBCXX_NOEXCEPT<br>    : _Node_alloc_type(__a), _M_node()<br>    &#123; &#125;<br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> __cplusplus &gt;= 201103L</span><br>    _List_impl(_Node_alloc_type&amp;&amp; __a) _GLIBCXX_NOEXCEPT<br>    : _Node_alloc_type(<span class="hljs-built_in">std</span>::move(__a)), _M_node()<br>    &#123; &#125;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br>      &#125;;<br></code></pre></div></td></tr></table></figure><p>_List_base类</p><figure class="highlight cpp"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> _Tp, <span class="hljs-keyword">typename</span> _Alloc&gt;<br>   <span class="hljs-class"><span class="hljs-keyword">class</span> _<span class="hljs-title">List_base</span></span><br><span class="hljs-class">   &#123;</span><br>   <span class="hljs-keyword">protected</span>:<br><br>     <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">typename</span> _Alloc::<span class="hljs-keyword">template</span> rebind&lt;_List_node&lt;_Tp&gt; &gt;::other  _Node_alloc_type;<br><br>     <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">typename</span> _Alloc::<span class="hljs-keyword">template</span> rebind&lt;_Tp&gt;::other _Tp_alloc_type;<br><br>     <span class="hljs-keyword">static</span> <span class="hljs-keyword">size_t</span><br>     _S_distance(<span class="hljs-keyword">const</span> __detail::_List_node_base* __first,<br>         <span class="hljs-keyword">const</span> __detail::_List_node_base* __last)<br>     &#123;<br>   <span class="hljs-keyword">size_t</span> __n = <span class="hljs-number">0</span>;<br>   <span class="hljs-keyword">while</span> (__first != __last)<br>     &#123;<br>       __first = __first-&gt;_M_next;<br>       ++__n;<br>     &#125;<br>   <span class="hljs-keyword">return</span> __n;<br>     &#125;<br><br>     _List_impl _M_impl;    <span class="hljs-comment">// 中间层类</span><br><br>     <span class="hljs-comment">// count the number of nodes</span><br>     <span class="hljs-keyword">size_t</span> _M_node_count() <span class="hljs-keyword">const</span><br>     &#123;<br>   <span class="hljs-keyword">return</span> _S_distance(_M_impl._M_node._M_next,<br>              <span class="hljs-built_in">std</span>::__addressof(_M_impl._M_node));<br>     &#125;<br><br><br> <span class="hljs-keyword">public</span>:<br>     <span class="hljs-keyword">typedef</span> _Alloc allocator_type;<br><br>     <span class="hljs-keyword">void</span><br>     _M_clear() _GLIBCXX_NOEXCEPT;<br><br>     <span class="hljs-keyword">void</span><br>     _M_init() _GLIBCXX_NOEXCEPT<br>     &#123;<br>       <span class="hljs-keyword">this</span>-&gt;_M_impl._M_node._M_next = &amp;<span class="hljs-keyword">this</span>-&gt;_M_impl._M_node;<br>       <span class="hljs-keyword">this</span>-&gt;_M_impl._M_node._M_prev = &amp;<span class="hljs-keyword">this</span>-&gt;_M_impl._M_node;<br>   _M_set_size(<span class="hljs-number">0</span>);<br>     &#125;<br>   &#125;;<br></code></pre></div></td></tr></table></figure><p>list类</p><figure class="highlight cpp"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> _Tp, <span class="hljs-keyword">typename</span> _Alloc = <span class="hljs-built_in">std</span>::allocator&lt;_Tp&gt; &gt;<br>    class <span class="hljs-built_in">list</span> : <span class="hljs-keyword">protected</span> _List_base&lt;_Tp, _Alloc&gt;<br>    &#123;<br>      <span class="hljs-comment">// concept requirements</span><br>      <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">typename</span> _Alloc::value_type                _Alloc_value_type;<br>      __glibcxx_class_requires(_Tp, _SGIAssignableConcept)<br>      __glibcxx_class_requires2(_Tp, _Alloc_value_type, _SameTypeConcept)<br><br>      <span class="hljs-keyword">typedef</span> _List_base&lt;_Tp, _Alloc&gt;                    _Base;<br>      <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">typename</span> _Base::_Tp_alloc_type         _Tp_alloc_type;<br>      <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">typename</span> _Base::_Node_alloc_type       _Node_alloc_type;<br><br>    <span class="hljs-keyword">public</span>:<br>      <span class="hljs-keyword">typedef</span> _Tp                                        value_type;<br>      <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">typename</span> _Tp_alloc_type::pointer           pointer;<br>      <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">typename</span> _Tp_alloc_type::const_pointer     const_pointer;<br>      <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">typename</span> _Tp_alloc_type::reference         reference;<br>      <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">typename</span> _Tp_alloc_type::const_reference   const_reference;<br>      <span class="hljs-keyword">typedef</span> _List_iterator&lt;_Tp&gt;                        iterator;<br>      <span class="hljs-keyword">typedef</span> _List_const_iterator&lt;_Tp&gt;                  const_iterator;<br>      <span class="hljs-keyword">typedef</span> <span class="hljs-built_in">std</span>::reverse_iterator&lt;const_iterator&gt;      const_reverse_iterator;<br>      <span class="hljs-keyword">typedef</span> <span class="hljs-built_in">std</span>::reverse_iterator&lt;iterator&gt;            reverse_iterator;<br>      <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">size_t</span>                                     size_type;<br>      <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">ptrdiff_t</span>                                  difference_type;<br>      <span class="hljs-keyword">typedef</span> _Alloc                                     allocator_type;<br><br>    <span class="hljs-keyword">protected</span>:<br>      <span class="hljs-comment">// Note that pointers-to-_Node&#x27;s can be ctor-converted to</span><br>      <span class="hljs-comment">// iterator types.</span><br>      <span class="hljs-keyword">typedef</span> _List_node&lt;_Tp&gt;                _Node;<br><br>      <span class="hljs-keyword">using</span> _Base::_M_impl;<br>      <span class="hljs-keyword">using</span> _Base::_M_put_node;<br>      <span class="hljs-keyword">using</span> _Base::_M_get_node;<br>      <span class="hljs-keyword">using</span> _Base::_M_get_Tp_allocator;<br>      <span class="hljs-keyword">using</span> _Base::_M_get_Node_allocator;<br><br>       ..........................................................<br><br>&#125;<br></code></pre></div></td></tr></table></figure><p>大概截取了stl_list实现的一部分，主要为了体现stl_list的代码结构，具体接口实现可以查看源码。</p><h1 id="stl-list简单实现"><a href="#stl-list简单实现" class="headerlink" title="stl-list简单实现"></a>stl-list简单实现</h1><h2 id="STL-List-h"><a href="#STL-List-h" class="headerlink" title="STL_List.h"></a>STL_List.h</h2><figure class="highlight cpp"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> STL_LIST</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> STL_LIST</span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;Def.h&quot;</span></span><br><br>__MUNDI_BEGIN<br><br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt; <br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">list</span></span><br><span class="hljs-class">&#123;</span><br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-comment">// The list node, the parent class maintains two pointers, and the subclass adds the specific value.</span><br>  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">list_node_base</span>  </span><br><span class="hljs-class">  &#123;</span><br>    list_node_base* Next;<br>    list_node_base* Prev;<br><br>    list_node_base():Next(<span class="hljs-literal">nullptr</span>), Prev(<span class="hljs-literal">nullptr</span>)&#123;&#125;<br>  &#125;;<br><br>  <span class="hljs-comment">// dataEntry node</span><br>  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">list_node</span>:</span> <span class="hljs-keyword">public</span> list_node_base<br>  &#123;<br>     T dataEntry;<br>  &#125;;<br><br>  <span class="hljs-comment">// iterator</span><br>  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">list_iterator</span></span><br><span class="hljs-class">  &#123;</span><br>    <span class="hljs-keyword">typedef</span> list_iterator   _Self;<br>    <span class="hljs-keyword">typedef</span> T               value_type;<br>    <span class="hljs-keyword">typedef</span> T*              pointer;<br>    <span class="hljs-keyword">typedef</span> T&amp;              reference;<br><br>    list_iterator() _T_STD_NOEXCEPT<br>    &#123;<br>      m_smartPtr = <span class="hljs-literal">nullptr</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">list_iterator</span><span class="hljs-params">(list_node_base * pNode)</span> _T_STD_NOEXCEPT</span><br><span class="hljs-function">    </span>&#123;<br>      m_smartPtr = pNode;<br>    &#125;<br><br>    reference <span class="hljs-keyword">operator</span>*() _T_STD_NOEXCEPT<br>    &#123;<br>      <span class="hljs-keyword">return</span>  <span class="hljs-keyword">static_cast</span>&lt;list_node *&gt;(m_smartPtr)-&gt;dataEntry;<br>    &#125;<br><br>    list_node_base* <span class="hljs-keyword">operator</span>-&gt;() _T_STD_NOEXCEPT<br>    &#123;<br>      <span class="hljs-keyword">return</span> m_smartPtr;<br>    &#125;<br><br>    _Self <span class="hljs-keyword">operator</span>++(<span class="hljs-keyword">int</span>) _T_STD_NOEXCEPT <span class="hljs-comment">// post increment</span><br>    &#123;<br>      _Self __tmp = *<span class="hljs-keyword">this</span>;<br>      m_smartPtr = m_smartPtr-&gt;Next;<br>      <span class="hljs-keyword">return</span> __tmp;<br>    &#125;<br><br>    _Self&amp; <span class="hljs-keyword">operator</span>++() _T_STD_NOEXCEPT <span class="hljs-comment">// pre increment</span><br>    &#123;<br>      m_smartPtr = m_smartPtr-&gt;Next;<br>      <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>    &#125;<br><br>    _Self <span class="hljs-keyword">operator</span>--(<span class="hljs-keyword">int</span>) _T_STD_NOEXCEPT<br>    &#123;<br>      _Self __tmp = *<span class="hljs-keyword">this</span>;<br>      m_smartPtr = m_smartPtr-&gt;Prev;<br>      <span class="hljs-keyword">return</span> __tmp;<br>    &#125;<br><br>    _Self&amp; <span class="hljs-keyword">operator</span>--() _T_STD_NOEXCEPT<br>    &#123;<br>      m_smartPtr = m_smartPtr-&gt;Prev;<br>      <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-keyword">const</span> list_iterator &amp; _Right) <span class="hljs-keyword">const</span> _T_STD_NOEXCEPT<br>    &#123;<br>      <span class="hljs-keyword">return</span> m_smartPtr == _Right.m_smartPtr;<br>    &#125;<br><br>    <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>!=(<span class="hljs-keyword">const</span> list_iterator &amp; _Right) <span class="hljs-keyword">const</span> _T_STD_NOEXCEPT<br>    &#123;<br>       <span class="hljs-keyword">return</span> m_smartPtr != _Right.m_smartPtr;<br>    &#125;<br><br>    list_node_base * m_smartPtr; <span class="hljs-comment">// Node pointer</span><br>  &#125;;<br><br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-keyword">typedef</span> list_iterator iterator;<br><br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">list</span>()  <span class="hljs-comment">// Default constructor</span><br>  &#123; <br>    empty_init();<br>  &#125;<br><br>  <span class="hljs-built_in">list</span>(<span class="hljs-keyword">const</span> <span class="hljs-built_in">list</span>&lt;T&gt; &amp; rhs) <span class="hljs-comment">// Copy construction</span><br>  &#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span> != &amp;rhs)<br>    &#123;<br>      empty_init(); <span class="hljs-comment">// initialization</span><br><br>      iterator itrBegin = rhs.begin();<br>      iterator itrEnd = rhs.end();<br><br>      <span class="hljs-keyword">while</span>(itrBegin != itrEnd)<br>      &#123;<br>         list_node * tmp = <span class="hljs-keyword">static_cast</span>&lt;list_node *&gt;(itrBegin.m_smartPtr);<br><br>         push_back(tmp-&gt;dataEntry);<br><br>         ++itrBegin;<br>      &#125;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-built_in">list</span> &amp; <span class="hljs-keyword">operator</span> = (<span class="hljs-keyword">const</span> <span class="hljs-built_in">list</span>&lt;T&gt; &amp; rhs) <span class="hljs-comment">// Assignment operator overloading</span><br>  &#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span> != &amp;rhs)<br>    &#123;<br>      <span class="hljs-comment">// If the original list has a value, it will be emptied first.</span><br>      <span class="hljs-keyword">if</span>(begin() != end())<br>      &#123;<br>        clear();<br>      &#125;<br><br>      iterator itrBegin = rhs.begin();<br>      iterator itrEnd = rhs.end();<br><br>      <span class="hljs-keyword">while</span>(itrBegin != itrEnd)<br>      &#123;<br>         list_node * tmp = <span class="hljs-keyword">static_cast</span>&lt;list_node *&gt;(itrBegin.m_smartPtr);<br><br>         push_back(tmp-&gt;dataEntry);<br><br>         ++itrBegin;<br>      &#125;<br>    &#125;<br>  &#125;<br><br>  ~<span class="hljs-built_in">list</span>()  <span class="hljs-comment">// Destructor</span><br>  &#123;<br>    clear();<br><br>    <span class="hljs-keyword">if</span>(pHeadNode)<br>    &#123;<br>      <span class="hljs-keyword">delete</span> pHeadNode;<br>      pHeadNode = <span class="hljs-literal">nullptr</span>;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-function">iterator <span class="hljs-title">begin</span><span class="hljs-params">()</span> _T_STD_NOEXCEPT</span><br><span class="hljs-function">  </span>&#123;<br>    <span class="hljs-keyword">return</span> iterator(pHeadNode-&gt;Next);<br>  &#125;<br><br>  <span class="hljs-function">iterator <span class="hljs-title">end</span><span class="hljs-params">()</span> _T_STD_NOEXCEPT</span><br><span class="hljs-function">  </span>&#123;<br>    <span class="hljs-keyword">return</span> iterator(pHeadNode);<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">push_back</span><span class="hljs-params">(<span class="hljs-keyword">const</span> T &amp; value)</span></span><br><span class="hljs-function">  </span>&#123;<br>    insert(end(), value);<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">push_front</span><span class="hljs-params">(<span class="hljs-keyword">const</span> T &amp; value)</span></span><br><span class="hljs-function">  </span>&#123;<br>    insert(begin(), value);<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">pop_front</span><span class="hljs-params">()</span> </span><br><span class="hljs-function">  </span>&#123;<br>     erase(begin()); <br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">pop_back</span><span class="hljs-params">()</span> </span><br><span class="hljs-function">  </span>&#123; <br>    iterator tmp = end();<br>    erase(--tmp);<br>  &#125;<br><br>  <span class="hljs-function">T &amp; <span class="hljs-title">front</span><span class="hljs-params">()</span></span><br><span class="hljs-function">  </span>&#123;<br>    <span class="hljs-keyword">return</span> *begin();<br>  &#125;<br><br>  <span class="hljs-function">T &amp; <span class="hljs-title">back</span><span class="hljs-params">()</span></span><br><span class="hljs-function">  </span>&#123;<br>    <span class="hljs-keyword">return</span> *(--end());<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> <span class="hljs-title">remove</span><span class="hljs-params">(<span class="hljs-keyword">const</span> T &amp; value)</span></span><br><span class="hljs-function">  </span>&#123;<br>    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;<br><br>    iterator itrBegin = begin();<br>    <span class="hljs-keyword">while</span>(itrBegin != end())<br>    &#123;<br>      <span class="hljs-keyword">if</span>(*itrBegin == value)<br>      &#123;<br>        itrBegin = erase(itrBegin);<br>        ++count;<br>      &#125;<br>      <span class="hljs-keyword">else</span><br>      &#123;<br>        ++itrBegin;<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> count;<br>  &#125;<br><br>  <span class="hljs-function">iterator <span class="hljs-title">erase</span><span class="hljs-params">(iterator position)</span></span><br><span class="hljs-function">  </span>&#123;<br>    list_node_base* next_node = position.m_smartPtr-&gt;Next;<br>    list_node_base* prev_node = position.m_smartPtr-&gt;Prev;<br>    prev_node-&gt;Next = next_node;<br>    next_node-&gt;Prev = prev_node;<br><br>    <span class="hljs-keyword">delete</span> position.m_smartPtr;<br>    position.m_smartPtr = <span class="hljs-literal">nullptr</span>;<br>    <br>    <span class="hljs-keyword">if</span>(_size &gt; <span class="hljs-number">0</span>)<br>    &#123;<br>      _size--;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> iterator(next_node);<br>  &#125;<br><br>  <span class="hljs-function">iterator <span class="hljs-title">insert</span><span class="hljs-params">(iterator position, <span class="hljs-keyword">const</span> T&amp; x)</span> </span><br><span class="hljs-function">  </span>&#123;<br>    list_node* tmp = <span class="hljs-keyword">new</span> list_node();<br>    tmp-&gt;dataEntry = x;<br>    tmp-&gt;Next = position.m_smartPtr;<br>    tmp-&gt;Prev = position.m_smartPtr-&gt;Prev;<br>    position.m_smartPtr-&gt;Prev-&gt;Next = tmp;<br>    position.m_smartPtr-&gt;Prev = tmp;<br><br>    ++_size;<br>    <span class="hljs-keyword">return</span> iterator(tmp);<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span><br><span class="hljs-function">  </span>&#123;<br>    iterator itrBegin = begin();<br>    <span class="hljs-keyword">while</span>(itrBegin != end())<br>    &#123;<br>      list_node* tmp =  <span class="hljs-keyword">static_cast</span>&lt;list_node *&gt;(itrBegin.m_smartPtr);<br><br>      ++itrBegin;<br><br>      <span class="hljs-keyword">if</span>(tmp)<br>      &#123;<br>        <span class="hljs-keyword">delete</span> tmp;<br>      &#125;<br>    &#125;<br><br>    pHeadNode-&gt;Next = pHeadNode;<br>    pHeadNode-&gt;Prev = pHeadNode;<br>    _size = <span class="hljs-number">0</span>;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">size</span><span class="hljs-params">()</span> <span class="hljs-comment">// return length</span></span><br><span class="hljs-function">  </span>&#123;<br>    <span class="hljs-keyword">return</span> _size;<br>  &#125;<br><br><span class="hljs-keyword">private</span>:<br>  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">empty_init</span><span class="hljs-params">()</span> </span><br><span class="hljs-function">  </span>&#123; <br>    pHeadNode = <span class="hljs-keyword">new</span> list_node_base();<br>    pHeadNode-&gt;Next = pHeadNode;  <span class="hljs-comment">// Initialize pointer to itself</span><br>    pHeadNode-&gt;Prev = pHeadNode;<br><br>    _size = <span class="hljs-number">0</span>;<br>  &#125;<br><br><span class="hljs-keyword">private</span>:<br>  list_node_base* pHeadNode; <span class="hljs-comment">// List head</span><br><br>  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> _size; <span class="hljs-comment">// the number of nodes, increase the efficiency of searching</span><br>&#125;;<br><br><br>__MUNDI_END<br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br></code></pre></div></td></tr></table></figure><h2 id="Def-h"><a href="#Def-h" class="headerlink" title="Def.h"></a>Def.h</h2><figure class="highlight cpp"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> __MUNDI_BEGIN namespace Mundi &#123;</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> __MUNDI_END &#125;</span><br><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> _T_STD_NOEXCEPT</span><br><span class="hljs-meta"># <span class="hljs-meta-keyword">if</span> __cplusplus &gt;= 201103L</span><br><span class="hljs-meta">#  <span class="hljs-meta-keyword">define</span> _T_STD_NOEXCEPT noexcept</span><br><span class="hljs-meta">#  <span class="hljs-meta-keyword">define</span> _T_STD_USE_NOEXCEPT noexcept</span><br><span class="hljs-meta">#  <span class="hljs-meta-keyword">define</span> _T_STD_THROW(_EXC)</span><br><span class="hljs-meta"># <span class="hljs-meta-keyword">else</span></span><br><span class="hljs-meta">#  <span class="hljs-meta-keyword">define</span> _T_STD_NOEXCEPT</span><br><span class="hljs-meta">#  <span class="hljs-meta-keyword">define</span> _T_STD_USE_NOEXCEPT throw()</span><br><span class="hljs-meta">#  <span class="hljs-meta-keyword">define</span> _T_STD_THROW(_EXC) throw(_EXC)</span><br><span class="hljs-meta"># <span class="hljs-meta-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br></code></pre></div></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>超星学习通开启自动播放模式</title>
    <link href="/2019/10/11/%E5%AD%A6%E4%B9%A0%E9%80%9A%E8%87%AA%E5%8A%A8%E6%92%AD%E6%94%BE%E6%A8%A1%E5%BC%8F/"/>
    <url>/2019/10/11/%E5%AD%A6%E4%B9%A0%E9%80%9A%E8%87%AA%E5%8A%A8%E6%92%AD%E6%94%BE%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<blockquote><p>In three words I can sum up everything I’ve learned about life: it goes on.<br>几个字足以概括我学到的人生：一切都在继续。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> fa = $(<span class="hljs-string">&quot;body&quot;</span>);<br><span class="hljs-keyword">var</span> btn = $(<span class="hljs-string">&quot;&lt;li&gt;&lt;/li&gt;&quot;</span>);<br><span class="hljs-keyword">var</span> json = &#123;<br>    <span class="hljs-string">&quot;background&quot;</span>: <span class="hljs-string">&quot;#66ccff&quot;</span>,<br>    <span class="hljs-string">&quot;height&quot;</span>: <span class="hljs-string">&quot;16px&quot;</span>,<br>    <span class="hljs-string">&quot;padding&quot;</span>: <span class="hljs-string">&quot;5px&quot;</span>,<br>    <span class="hljs-string">&quot;z-index&quot;</span>: <span class="hljs-number">0xFFFFF</span>,<br>    <span class="hljs-string">&quot;cursor&quot;</span>: <span class="hljs-string">&quot;pointer&quot;</span>,<br>    <span class="hljs-string">&quot;top&quot;</span>: <span class="hljs-string">&quot;300px&quot;</span>,<br>    <span class="hljs-string">&quot;right&quot;</span>: <span class="hljs-string">&quot;120px&quot;</span>,<br>    <span class="hljs-string">&quot;position&quot;</span>: <span class="hljs-string">&quot;fixed&quot;</span><br>&#125;;<br>btn.css(json);<br>btn.html(<span class="hljs-string">&quot;&lt;span id=&#x27;lfsenior&#x27;&gt;开启自动播放模式&lt;/span&gt;&quot;</span>);<br>fa.append(btn);<br> <br>btn.click(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br> <br>    <span class="hljs-built_in">setInterval</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-comment">//获取iframe</span><br>        <span class="hljs-keyword">var</span> video = $(<span class="hljs-string">&quot;iframe&quot;</span>).contents().find(<span class="hljs-string">&quot;iframe&quot;</span>).contents();<br>        <span class="hljs-comment">//播放函数</span><br>        <span class="hljs-keyword">var</span> play = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>            video.find(<span class="hljs-string">&quot;#video &gt; button&quot;</span>).click();<br>            <span class="hljs-keyword">var</span> jy = video.find(<span class="hljs-string">&quot;#video &gt; div.vjs-control-bar &gt; div.vjs-volume-panel.vjs-control.vjs-volume-panel-vertical &gt; button&quot;</span>);<br>            <span class="hljs-keyword">if</span> (jy.attr(<span class="hljs-string">&quot;title&quot;</span>) != <span class="hljs-string">&quot;取消静音&quot;</span>) &#123;<br>                jy.click()<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">//如果正在加载</span><br>        <span class="hljs-keyword">var</span> load = video.find(<span class="hljs-string">&quot;#loading&quot;</span>);<br>        <span class="hljs-keyword">if</span> (load.css(<span class="hljs-string">&quot;visibility&quot;</span>) != <span class="hljs-string">&quot;hidden&quot;</span>) &#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-comment">//获取当前进度</span><br>        <span class="hljs-keyword">var</span> spans = video.find(<span class="hljs-string">&quot;#video &gt; div.vjs-control-bar &gt; div.vjs-progress-control.vjs-control &gt; div&quot;</span>).attr(<span class="hljs-string">&quot;aria-valuenow&quot;</span>);<br>        <span class="hljs-comment">// 如果还没播放完</span><br>        <span class="hljs-keyword">if</span> (spans != <span class="hljs-number">100</span>) &#123;<br>            play();<br>        &#125;<br>        $(<span class="hljs-string">&quot;#lfsenior&quot;</span>).html(<span class="hljs-string">&quot;自动模式已开启,本章进度:&quot;</span> + spans + <span class="hljs-string">&quot;%&quot;</span>);<br>    &#125;, <span class="hljs-number">100</span>);<br> <br>&#125;);<br></code></pre></div></td></tr></table></figure><p>以Chrome为例，按F12打开Console，复制代码回车即可。</p><hr><h2 id="2019-10-18更新"><a href="#2019-10-18更新" class="headerlink" title="2019-10-18更新"></a>2019-10-18更新</h2><p>目前部分课程网站添加了前端反调试，表现为页面不断debugger，Chrome只需Ctrl + F8禁止断点即可。</p>]]></content>
    
    
    
    <tags>
      
      <tag>something useful</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>线性代数的本质（更新中）</title>
    <link href="/2019/06/30/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E7%9A%84%E6%9C%AC%E8%B4%A8/"/>
    <url>/2019/06/30/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E7%9A%84%E6%9C%AC%E8%B4%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="序言"><a href="#序言" class="headerlink" title="序言"></a>序言</h1><blockquote><p>There is hardly any theory which is more elementary than linear algebra, in spite of the fact that generations of professors and textbook writers have obscured its simplicity by preposterous calculations with matrices.<br>尽管一批教授和教科书作者用关于矩阵的荒谬计算掩盖了<strong>线性代数</strong>的简明性，但鲜有比之更基本的理论。</p></blockquote><p>将只停留在数值运算和公式的线性代数与<strong>可视化几何直观</strong>（Visual Geometric Intuition）结合，整理自<a href="https://www.bilibili.com/video/av6731067/">3Blue1Brown的系列视频</a>。内容涉及到向量，线性变换，行列式，逆矩阵，点积与叉积，特征向量与特征值等，以及二次型，相似矩阵等补充内容。</p><p><img src="https://cdn.jsdelivr.net/gh/Mundi-Xu/picture_resource@master/picture/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E7%9A%84%E6%9C%AC%E8%B4%A8/1-Application.jpg" alt="线性代数的应用"></p><h2 id="我们为什么需要几何直观"><a href="#我们为什么需要几何直观" class="headerlink" title="我们为什么需要几何直观"></a>我们为什么需要几何直观</h2><p>在开始之前，想象学习一个事物（概念）的场景：我们需要学习<strong>正弦函数</strong>  $\sin (x)$ ，非常不幸的是，你遇到的教材告诉你，正弦函数是这样的：  </p><p>$\sin (x) = x - \frac{x^3}{3!} + \frac{x^5}{5!} + \cdots + (-1)^n\frac{x^{2n+1}}{(2n+1)!} + \cdots$</p><p>看上去很厉害的样子，并且计算机也的确是这么计算 $\sin (x)$ 的，而对你来说，计算$\sin (\frac{\pi}{6})$可能就是把 $x= \frac{\pi}{6}$ 代入公式，然后神奇的发现结果越算越接近<strong>0.5</strong> ，此时你对$\sin (x)$与三角形之间的几何直观只有一些模糊的概念，这样的学习就十分悲催了。为什么呢？再假设一个场景：<br>在学完$\sin (x)$函数后，你又去参加了一个物理课程，正弦函数随处可见，其他人很快就能知道如何使用它并能得出大概值，而刚学完正弦函数的你内心戏大概是这样的：这群学物理的脑子也太强了！</p><div align = "center">    <img src="https://cdn.jsdelivr.net/gh/Mundi-Xu/picture_resource@master/picture/线性代数的本质/1-sin.png" width = 60% alt="sin" div align="center" /></div><br /><p>其实，你需要只是一个<strong>几何直观</strong>的灌输而已，这也从侧面佐证了一个好的老师或教材（<strong>这里的好老师真的不是他本身的学术能力有多强，而在于他擅不擅长站在学习者的角度不断的修正教学方法</strong>）是有多么重要。</p><p>教学不同层次的人：初学、入门、掌握、理解，解释的角度，方式都完全不同。更加不幸的是，为了能更加通用的用理论来描述现实生活中的规律，人类已经做了很多工作，我们常说：<strong>越通用，越抽象</strong>，这对于初学者来说堪称一段噩梦。</p><p>上述例子可能比较极端，但只为强调一件事：直观理解很重要，或者说，<strong>学习方法很重要</strong>。好的学习方法即你如何直观的去理解（可能是几何的，或是现实中的具体例子）一个抽象的事物，并<strong>层次化的建立知识与知识间的联系</strong>，构建并健壮属于自己的知识图谱。个人观点是，这种<strong>学习方法</strong>是最高效的。它唯一的要求在于，<strong>需要一定的基础知识</strong>打底，一定的量变结合方法论（点拨或领悟）就是质变。</p><h1 id="向量究竟是什么"><a href="#向量究竟是什么" class="headerlink" title="向量究竟是什么"></a>向量究竟是什么</h1><blockquote><p>The introduction of numbers as <strong>coordinates</strong> is an act of violence.<br>引入一些数作为<strong>坐标</strong>是一种鲁莽的行为。</p></blockquote><h2 id="不同视角下的向量"><a href="#不同视角下的向量" class="headerlink" title="不同视角下的向量"></a>不同视角下的向量</h2><p>对于向量的这个概念，大家一定并不陌生，但是这次让我们从<strong>数学</strong>，<strong>物理</strong>，<strong>计算机</strong>三个角度来看待如何定义这个<strong>向量</strong>这个概念。</p><h3 id="物理专业角度"><a href="#物理专业角度" class="headerlink" title="物理专业角度"></a>物理专业角度</h3><ul><li>向量是<strong>空间中的箭头</strong></li><li>决定一个向量的是：<strong>它的长度和它所指的方向</strong></li></ul><h3 id="计算机专业角度"><a href="#计算机专业角度" class="headerlink" title="计算机专业角度"></a>计算机专业角度</h3><ul><li>向量是有序的<strong>数字列表</strong></li><li>向量不过是“列表”一个花哨的说法</li><li>向量的<strong>维度</strong>等于“列表”的<strong>长度</strong></li></ul><h3 id="数学专业角度"><a href="#数学专业角度" class="headerlink" title="数学专业角度"></a>数学专业角度</h3><p>对数学来说，它的本质就是通用和抽象，所以，数学家希望概括这两种观点:</p><ul><li>向量可以是任何东西，只需要保证：<strong>两个向量相加及数字与向量相乘有意义</strong></li><li><strong>向量加法</strong>和<strong>向量乘法</strong>贯穿线性代数始终，十分重要</li></ul><img src="https://cdn.jsdelivr.net/gh/Mundi-Xu/picture_resource@master/picture/线性代数的本质/1-MathVector.png" width = 70% alt="vector" /><p>可以通过上图直观的感受到数学家在想什么。左边是物理角度，右边是计算机角度，但是很抱歉，<strong>我能用一些抽象的定义和约束让你们变成一个东西</strong>。</p><h2 id="坐标系"><a href="#坐标系" class="headerlink" title="坐标系"></a>坐标系</h2><p>把向量置于坐标系中，以原点为起点，坐标正负表示方向，可完美把两个不同的角度融合。</p><ul><li>向量加法<ul><li>物理：首尾相连 (Motion)</li><li>计算机：坐标相加</li></ul></li><li>向量乘法<ul><li>物理：缩放 (Scaling)</li><li>计算机：坐标和比例相乘</li></ul></li></ul><p>实际上无论你怎么看待向量都无所谓，或把向量看作空间中的箭头，或把向量看作数字列表，线性代数的效用很少体现在这些观点中的其中一个上，而是更多的体现在它能够在这些观点中<strong>互相转化</strong>。线性代数为数据分析提供了一条将大量数据列表<strong>概念化、可视化</strong>的渠道，它能让数据样式变得非常明晰，并让你大致了解其特定运算的意义。同时，线性代数给物理学家和计算机图形程序员提供了一种方法去通过计算机能处理的数字来<strong>描述并操纵空间</strong>（例如<a href="https://github.com/3b1b/manim">Mathematical Animation Engine</a>)。</p><h1 id="线性组合、基与其张成的空间"><a href="#线性组合、基与其张成的空间" class="headerlink" title="线性组合、基与其张成的空间"></a>线性组合、基与其张成的空间</h1><blockquote><p>Mathematics requires a small dose, not of genius, but of an <strong>imaginative freedom</strong> which, in a larger dose, would be insanity.<br>数学需要的不是天赋，而是少量的<strong>自由想象</strong>，但想象太过自由又会陷入疯狂。</p></blockquote><p>本部分继续加深一个概念，为何<strong>向量加法与向量乘法</strong>是那么重要，并从始至终贯穿整个线性代数（关于后面的直观解释部分，强烈建议去<a href="https://www.bilibili.com/video/av6731067/?p=3">原视频</a>观看动画演示）。  </p><h2 id="线性组合"><a href="#线性组合" class="headerlink" title="线性组合"></a>线性组合</h2><p>二维空间中任意两个<strong>不共线的非零向量</strong>都可以表示该空间中的任意一个向量，写成符号语言就是： $a \mathbf{\vec v} + b \mathbf{\vec w}$ 。</p><div align = "center">    <img src="https://cdn.jsdelivr.net/gh/Mundi-Xu/picture_resource@master/picture/线性代数的本质/1-linear-comb.png" width = 65% alt="linear-comb" /></div><br /><p>至于为什么被称为“线性”，有一种几何直观：如果你固定其中一个标量，让另一个标量自由变化，所产生的向量终点会描出一条直线。（这里其实很不严谨，具体定义请参阅课本。）</p><div align = "center">    <img src="https://cdn.jsdelivr.net/gh/Mundi-Xu/picture_resource@master/picture/线性代数的本质/1-Linear.gif" width = 60% alt="Linear" /></div><br /><h2 id="空间的基-Basis"><a href="#空间的基-Basis" class="headerlink" title="空间的基 (Basis)"></a>空间的基 (Basis)</h2><p>对于我们常见的笛卡尔坐标系，有一组最直观的基：${ \hat{\imath},{\hat{\jmath}} }$，即单位向量 $\hat{\imath}=(1,0)$ 和 $\hat{\jmath}=(0,1)$,通过$\hat{\imath}$和${\hat{\jmath}}$的<strong>拉伸与相加</strong>可以组成笛卡尔坐标系中的任意一个向量。（上述的任意两个不共线的非零向量也可以作为二维空间的一组基。）</p><h3 id="张成的空间-Span"><a href="#张成的空间-Span" class="headerlink" title="张成的空间 (Span)"></a>张成的空间 (Span)</h3><p>同理，我们可以选择不同的基向量，而这些基向量构成的空间就称为其张成的空间。张成二字比较拗口，可以类比为<strong>延伸或扩展</strong>。直观来看，就是本文所有图中的网格。笛卡尔坐标系就是一个由单位坐标${ \hat{\imath},{\hat{\jmath}} }$张成的空间（同时也是上述任意两个不共线的非零向量所张成的空间）。所有可以表示为给定向量（基）<strong>线性组合</strong>（刚刚讲了这个概念）的向量的集合，被称为给定向量（基）张成的空间。</p><div align = "center">    <img src="https://cdn.jsdelivr.net/gh/Mundi-Xu/picture_resource@master/picture/线性代数的本质/1-span.png" width = 60% alt="span" div align=center /></div><br />如果你继续思考一下，会发现一个特点：**并不是每一组给定向量都可以张成一个空间**，若这两个向量共线（2D），共面（3D），它们就只能被限制在一个直线或面中，类似于“降维打击”（这也是我强调不共线且向量非零的原因）。通过这个直观的思考可以引出以下概念：<h3 id="线性相关"><a href="#线性相关" class="headerlink" title="线性相关"></a>线性相关</h3><p>关于什么是线性相关，有两种表达：</p><ul><li>你有多个向量，并且可以<strong>移除其中一个而不减小张成的空间</strong>（即2D共线或3D共面），我们称它们（这些向量）线性相关。</li><li>其中一个向量，可以<strong>表示为其他向量的线性组合</strong>，因为这个向量已经落在其他向量张成的空间之中。</li></ul><p>从统计学角度来说，就是指这些向量之中有<strong>冗余</strong>。即在这一堆向量中，我们只需要其中几个（取决于维度）就可以表示所有其他的向量。<br>由此，我们可以得出以下部分：</p><h3 id="向量空间中一组基的严格定义"><a href="#向量空间中一组基的严格定义" class="headerlink" title="向量空间中一组基的严格定义"></a>向量空间中一组基的严格定义</h3><p>向量空间的一组基是张成该空间的一个<strong>线性无关向量集</strong>。  </p><blockquote><p>在线性代数中，基(basis)（也称为基底）是描述、刻画向量空间的基本工具。向量空间的基是它的一个特殊的子集，基的元素称为<strong>基向量</strong>。向量空间中<strong>任意一个元素</strong>，都可以<strong>唯一</strong>地表示成基向量的线性组合。如果基中元素个数有限，就称向量空间为有限维向量空间，将<strong>元素的个数</strong>称作向量空间的<strong>维数</strong>。 使用基底可以便利地描述向量空间。  </p></blockquote><p>用这样的步骤来慢慢导出这个定义，个人感觉，远比在课堂的第一分钟就将这句让你迷惑的话丢给你好的多，<strong>抽象的东西只有在慢慢推倒中你才能发现它的精巧之处，非常优雅且迷人</strong>。  </p><h1 id="矩阵与线性变换"><a href="#矩阵与线性变换" class="headerlink" title="矩阵与线性变换"></a>矩阵与线性变换</h1><blockquote><p>Unfortunately, no one can be told what the <strong>Matrix</strong> is. You have to <strong>see it for yourself</strong>.<br>很遗憾，<strong>矩阵</strong>是什么是说不清的。你必须得自己亲眼看看。  </p></blockquote><p>矩阵，最直观的理解当然是一个<strong>写成方阵的数字</strong> $\begin{pmatrix}1&amp;0 \\ 0&amp;1 \end{pmatrix}$，这几节的核心是为了说明：矩阵其实就是一种<strong>向量变换</strong>（至于什么是变换下面会讲），并附带一种不用死记硬背的考虑矩阵向量乘法的方法。  </p><h2 id="变换"><a href="#变换" class="headerlink" title="变换"></a>变换</h2><p><strong>变换</strong>本质上是<strong>函数</strong>（下左图）的一种花哨的说法，它接受输入内容，并输出对应结果，特别的，在矩阵变换（下右图）中，我们接受一个向量并且输出另一个向量。  </p><img src="https://cdn.jsdelivr.net/gh/Mundi-Xu/picture_resource@master/picture/线性代数的本质/1-fun.gif" width = "50%" div align=left /><img src="https://cdn.jsdelivr.net/gh/Mundi-Xu/picture_resource@master/picture/线性代数的本质/1-trans.gif" width = "50%" div align=right />  <p>那既然<strong>变换</strong>和<strong>函数</strong>意义相同，为什么要用多余的术语困惑我们呢？因为使用<strong>变换</strong>是在暗示以特定方式来可视化这一<strong>输入$\to$输出关系</strong>。一种理解“向量的函数”的方法就是就是使用<strong>运动</strong>。</p><div align = "center">    <img src="https://cdn.jsdelivr.net/gh/Mundi-Xu/picture_resource@master/picture/线性代数的本质/1-movement.gif" width = 70% alt="motion" /></div><br /><p>这世界上有非常多优美的变换，如果你将他们可视化，就能得到下图：</p><p><img src="https://cdn.jsdelivr.net/gh/Mundi-Xu/picture_resource@master/picture/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E7%9A%84%E6%9C%AC%E8%B4%A8/2-trans.gif" alt="2-trans"></p><h2 id="线性变换"><a href="#线性变换" class="headerlink" title="线性变换"></a>线性变换</h2><p>我们说具有以下两个性质的就是线性变换（直观可视化如下图）：</p><ul><li>直线在变换后仍然<strong>保持为直线</strong>，不能有所弯曲。</li><li><strong>原点必须保持固定</strong></li></ul><img src="https://cdn.jsdelivr.net/gh/Mundi-Xu/picture_resource@master/picture/线性代数的本质/3-trans.gif" width = 50% alt="Linear-trans" /><p>用一句话总结就是：线性变换是<strong>保持网格线平行且等距分布</strong>的变换（如果变换后保持直线不变但原点改变则为仿射变换，即<strong>线性变换+平移</strong>）。</p><h2 id="如何用数值描述线性变换"><a href="#如何用数值描述线性变换" class="headerlink" title="如何用数值描述线性变换"></a>如何用数值描述线性变换</h2><p>这里需要使用上一节提到的工具，<strong>空间的基</strong>，也就是单位向量（基向量）：$\hat{\imath}=(1,0)$ 和 $\hat{\jmath}=(0,1)$  </p><p>对线性变换，我们只需要关注两个<strong>基向量</strong> $\hat{\imath}$ 和 $\hat{\jmath}$<strong>变换后的位置</strong>即可。例如，$\hat{\imath}$ 变换到$(3,1)$的位置，$\hat{\jmath}$ 变换到$(1,2)$的位置,将$\hat{\imath}$<strong>变换后的坐标</strong>竖起来作为方阵的第一列（绿色表示），$\hat{\jmath}$<strong>变换后的坐标</strong>竖起来作为方阵的第二列（红色表示），得到矩阵$\begin{pmatrix}\color{green}3&amp;\color{red}1 \\ \color{green}1&amp;\color{red}2 \end{pmatrix}$。假设我们想要知道目标向量$(-1,2)$进行变换后的位置，那么这个矩阵就是对<strong>变换过程</strong>最好的描述，一图胜千言。</p><div align = "center">    <img src="https://cdn.jsdelivr.net/gh/Mundi-Xu/picture_resource@master/picture/线性代数的本质/1-matrix.gif" width = 75% alt="matrix" div align=center /></div><ul><li>Step1： 绿色$\hat{\imath}$（x轴）进行移动（变换）</li><li>Step2： 红色$\hat{\jmath}$（y轴）进行移动（变换）</li><li>Step3： 目标向量x轴<strong>坐标值</strong>与$\hat{\imath}$<strong>变换后向量</strong>进行<strong>向量乘法</strong></li><li>Step4： 目标向量y轴<strong>坐标值</strong>与$\hat{\jmath}$<strong>变换后向量</strong>进行<strong>向量乘法</strong></li><li>Step5： 两者进行<strong>向量加法</strong>，得到线性变换结果</li></ul><br /><p>更加一般的情况，我们用变量来代替其中的具体值，其中绿色代表$\hat{\imath}$变换后的向量，红色代表$\hat{\jmath}$变换后的向量：</p><p>$\begin{pmatrix}\color{green}a&amp;\color{red}b \\ \color{green}c&amp;\color{red}d \end{pmatrix}\begin{pmatrix} x \\ y\end{pmatrix} = \underbrace{x \begin{pmatrix}\color{green}a \\ \color{green}c \end{pmatrix} +  y \begin{pmatrix} \color{red}b \\ \color{red}d \end{pmatrix}}_{\text{直观的部分这里}} = \begin{pmatrix}\color{green}{a}\color{black}{x}+\color{red}{b}\color{black}{y} \\ \color{green}{c}\color{black}{x}+\color{red}{d}\color{black}{y}\end{pmatrix}$  </p><p>上面的公式就是我们常说的<strong>矩阵乘法公式</strong>，现在，不要强行背诵，结合可视化的直观动图，你一辈子都不会忘记的。</p><h2 id="线性的严格定义"><a href="#线性的严格定义" class="headerlink" title="线性的严格定义"></a>线性的严格定义</h2><p>在给出一个数学化抽象的解释前，先做一下总结：</p><ul><li><strong>线性变换</strong>是操纵<strong>空间</strong>的一种手段，它<strong>保持网格线平行且等距分布，并保持原点不动</strong></li><li><strong>矩阵</strong>是描述这种<strong>变换</strong>的一组数字，或者说一种<strong>描述线性变换的语言</strong></li></ul><p>在数学上，<strong>线性</strong>的严格定义如下述公式，这些性质，会在之后进行讨论，也可以在这里就进行一些思考，为什么说向量加法和向量乘法贯穿线性代数始终？</p><p>$L(\mathbf {\vec v} + \mathbf{\vec w}) = L(\mathbf {\vec v}) + L(\mathbf {\vec w}) \qquad 可加性（对加法封闭）$<br>$L(c \mathbf {\vec v}) = c L(\mathbf {\vec v}) \qquad 成比例（对数乘封闭）$</p><h1 id="矩阵乘法与线性变换复合"><a href="#矩阵乘法与线性变换复合" class="headerlink" title="矩阵乘法与线性变换复合"></a>矩阵乘法与线性变换复合</h1><blockquote><p>It is my experience that proofs involving matrices can be shortened by 50% if one throws the matrices out.<br>据我的经验，如果<strong>丢掉矩阵</strong>的话，那些涉及<strong>矩阵</strong>的证明可以缩短一半。  </p></blockquote><h2 id="复合变换"><a href="#复合变换" class="headerlink" title="复合变换"></a>复合变换</h2><p>如果对一个向量先进行一次旋转变换，再进行一次剪切变换( $\hat {\imath}$保持$(1,0)$不变, $\hat{\jmath}$移动到坐标$(1,1)$),如下图所示：  </p><div align = "center">    <img src="https://cdn.jsdelivr.net/gh/Mundi-Xu/picture_resource@master/picture/线性代数的本质/1-comp.png" width = 75% alt="matrix" div align=center /></div><br />那么如果通过旋转矩阵和剪切矩阵来求得这个符合矩阵呢？为了解决这个问题，我们定义这个过程叫做**矩阵的乘法**。<h2 id="矩阵乘法的计算"><a href="#矩阵乘法的计算" class="headerlink" title="矩阵乘法的计算"></a>矩阵乘法的计算</h2><p>在这里我们发现，矩阵乘法的变换顺序是<strong>从右往左读的</strong>（这一个常识很重要，你得明白这一点，有基本概念），也和我们熟知的复合函数形式 $f(g(x))$ 是一致的。</p><p>那么如何求解矩阵乘法呢？对线性代数有印象的同学现在能马上记起来那个稍显复杂的公式吗？如果有些忘记了，那么，现在，就有一个一辈子也忘不了的直观解释方法：</p><div align = "center">    <img src="https://cdn.jsdelivr.net/gh/Mundi-Xu/picture_resource@master/picture/线性代数的本质/1-cal.gif" width = 75% alt="cal" div align=center /></div><br />如图，$M_1$矩阵的第一列表示的是$\hat{\imath}$变换的位置，先把它拿出来，$M_2$矩阵看成对这个变换过的$\hat{\imath}$进行一次变换（按照前文的规则）。同理，针对$\hat{\jmath}$做一样的操作，就可以得出这个表达式。<h2 id="矩阵乘法的运算规律"><a href="#矩阵乘法的运算规律" class="headerlink" title="矩阵乘法的运算规律"></a>矩阵乘法的运算规律</h2><p>通常学生在学习矩阵乘法时都会记住上述公式并通过一些特定的运算加强记忆（包括我），但是在记忆这个过程前，我希望你能养成<strong>思考矩阵乘法意义</strong>的习惯，也就是<strong>两个变换相继作用</strong>。这能形成一个更好的概念性框架，并让你更容易理解矩阵乘积的性质。<br>举个栗子，矩阵相乘时，它们的先后顺序影响结果吗？有了上面的想法，可以自己试着在不进行计算的条件下思考一下，然后再尝试证明<strong>结合律</strong>与<strong>分配律</strong>是否成立。你会发现，原来线性代数是这么的直观，完全<strong>不需要计算</strong>。  </p><h1 id="未完待续……"><a href="#未完待续……" class="headerlink" title="未完待续……"></a>未完待续……</h1><p> <img src="https://cdn.jsdelivr.net/gh/Mundi-Xu/picture_resource@master/picture/%E9%80%9A%E7%94%A8/%E6%8B%96%E6%9B%B4.png" alt="waiting"></p>]]></content>
    
    
    
    <tags>
      
      <tag>线性代数</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>一种神奇的rsa加密算法</title>
    <link href="/2018/11/29/%E4%B8%80%E7%A7%8D%E7%A5%9E%E5%A5%87%E7%9A%84rsa%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/"/>
    <url>/2018/11/29/%E4%B8%80%E7%A7%8D%E7%A5%9E%E5%A5%87%E7%9A%84rsa%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<hr><p><strong>新的算法并没有透露 <code>n</code>，只给定了两个大整数：<code>(p*q)^(p+q)</code> 和 <code>(p*q)^(p-q)</code>，其中 <code>^</code> 是按位异或运算。</strong></p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sympy<br><br>p = sympy.randprime(<span class="hljs-number">2</span> ** <span class="hljs-number">1023</span>, <span class="hljs-number">2</span> ** <span class="hljs-number">1024</span>)<br>q = sympy.randprime(<span class="hljs-number">2</span> ** <span class="hljs-number">1023</span>, <span class="hljs-number">2</span> ** <span class="hljs-number">1024</span>)<br><br>a = (p * q) ^ (p + q)<br>b = (p * q) ^ (p - q)<br><br>flag = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;flag.txt&#x27;</span>, <span class="hljs-string">&#x27;rb&#x27;</span>).read()<br>m = <span class="hljs-built_in">int</span>.from_bytes(flag, <span class="hljs-string">&#x27;big&#x27;</span>)<br><br>print(a, b, <span class="hljs-built_in">pow</span>(m, <span class="hljs-number">65537</span>, p * q))<br><br></code></pre></div></td></tr></table></figure><hr><h2 id="2018年12月20日更新"><a href="#2018年12月20日更新" class="headerlink" title="2018年12月20日更新"></a>2018年12月20日更新</h2><p>我们定义 $ f_1(x,y) = (x \ast y)^{(x+y)} 和 f_2(x,y) = (x \ast y)^{(x-y)} $ ，我们发现这两个函数都有一个共同的性质，就是函数值的最低 n 个二进制位只和 x、y 的最低 n 个二进制位有关。也就是说，我们可以用 a 和 b 的最低 n 位来判断 p 和 q 的最低 n 位是否可能正确。如果它们的最低 n 位满足 $ f_1 $和 $f_2$ 函数，那么它们就是 p 和 q 低位的候选答案；如果不满足，它们就根本不可能是真正 p 和 q 的低位。所以我们可以从一个二进制位（n=1）开始，每次增加一位。每增加一位时，我们把原来满足条件的 p 和 q 低位的每种可能情况分别在前面加上 0 或 1，这样每种情况就变成了 4 种新的情况，然后对所有新的情况用 $ f_1 $ 和 $ f_2 $ 函数提供的约束条件进行过滤，只保留满足条件的情况。当跑到 1024 位的时候，就只会剩下真正满足条件的 p 和 q 了。然后，我们根据 RSA 的原理，在 mod (p-1)*(q-1) 的意义下对 e 求逆元，得到私钥 d，计算 pow(c, d, p*q)即可得到 flag 的大整数表示。</p><p><strong>求解脚本如下</strong></p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> gmpy2<br><br>a, b, c = [<span class="hljs-built_in">int</span>(s) <span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;output.txt&#x27;</span>).read().split()]<br><span class="hljs-comment">#假设已将加密内容保存到 output.txt 文件中</span><br><br>f1 = <span class="hljs-keyword">lambda</span> p, q: (p * q) ^ (p + q)<br>f2 = <span class="hljs-keyword">lambda</span> p, q: (p * q) ^ (p - q)<br><br>candidates = &#123;(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)&#125;<br><br><span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1025</span>):<br>    print(m, <span class="hljs-built_in">len</span>(candidates))<br>    candidates_ = <span class="hljs-built_in">set</span>()<br>    mask = (<span class="hljs-number">2</span> &lt;&lt; m) - <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> x, y <span class="hljs-keyword">in</span> candidates:<br>        <span class="hljs-keyword">if</span> f1(x, y) == a <span class="hljs-keyword">and</span> f2(x, y) == b:<br>            p, q = x, y<br>            d = gmpy2.invert(<span class="hljs-number">65537</span>, (p - <span class="hljs-number">1</span>) * (q - <span class="hljs-number">1</span>))<br>            m = <span class="hljs-built_in">pow</span>(c, d, p * q)<br>            print(<span class="hljs-built_in">bytes</span>.fromhex(<span class="hljs-built_in">hex</span>(m)[<span class="hljs-number">2</span>:]))<br>            exit()<br>        <span class="hljs-keyword">for</span> bx <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>):<br>            <span class="hljs-keyword">for</span> by <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>):<br>                xx = x + (bx &lt;&lt; m)<br>                yy = y + (by &lt;&lt; m)<br>                <span class="hljs-keyword">if</span> f1(xx, yy) &amp; mask != a &amp; mask:<br>                    <span class="hljs-keyword">continue</span><br>                <span class="hljs-keyword">if</span> f2(xx, yy) &amp; mask != b &amp; mask:<br>                    <span class="hljs-keyword">continue</span><br>                candidates_.add((xx, yy))<br>candidates = candidates_<br><br></code></pre></div></td></tr></table></figure><p><strong>有几个人做出来了呢（坏笑:）</strong></p>]]></content>
    
    
    
    <tags>
      
      <tag>ctf</tag>
      
      <tag>crypto</tag>
      
      <tag>rsa</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2018/10/25/hello-world/"/>
    <url>/2018/10/25/hello-world/</url>
    
    <content type="html"><![CDATA[<h2 id="Welcome-to-My-Blog-This-is-my-first-post"><a href="#Welcome-to-My-Blog-This-is-my-first-post" class="headerlink" title="Welcome to My Blog ! This is my first post"></a>Welcome to My Blog ! This is my first post</h2><h2 id="My-Instagram-mundi-xu"><a href="#My-Instagram-mundi-xu" class="headerlink" title="My Instagram: mundi.xu"></a>My Instagram: mundi.xu</h2><h2 id="Thank-you-for-subscribing-me"><a href="#Thank-you-for-subscribing-me" class="headerlink" title="Thank you for subscribing me"></a>Thank you for subscribing me</h2>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
